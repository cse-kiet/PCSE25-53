# PCSE25-53

## Team Members:
1. **Rovince Gangwar** (2100290100139 - CSE - 8C)
2. **Yash Goswami** (2100290100195 - CSE - 8C)
3. **Mohd. Uzair Khan** (2100290100099 - CSE - 8C)
*Project Guide:* **Dr. Seema Maitrey** (Associate Professor, CSE)

# Padharo Sa: Tourism Itinerary Generation Based on Image Similarity

## Overview

Padharo Sa is an innovative project that generates personalized tourism itineraries based on visual similarity. Users upload an image representing their desired travel aesthetic or a specific location, and the system recommends visually similar tourist attractions. It then leverages geospatial data and optimization algorithms to create a practical and customized travel plan.

The core technologies used include:
*   **CLIP (Contrastive Language–Image Pre-training):** For generating image embeddings that capture visual essence.
*   **FAISS (Facebook AI Similarity Search):** For efficient similarity search among location embeddings.
*   **Google Maps API:** For geocoding, retrieving place details (ratings, opening hours), and calculating routes/travel times.
*   **Google OR-Tools:** For solving the Vehicle Routing Problem with Time Windows (VRPTW) to optimize daily itineraries.
*   **Streamlit:** For creating the interactive web user interface.
*   **Folium:** For visualizing itineraries on an interactive map.

This project was developed as part of a Bachelor of Technology degree and was presented at the ICETISD-2025 conference.

## Features

*   **Image-Based Destination Discovery:** Upload an image to find visually similar tourist locations.
*   **Personalized Itinerary Customization:** Define travel dates, preferred attraction types, search radius, and travel pace.
*   **Geospatial Data Integration:** Uses Google Maps for accurate location details, ratings, and opening hours.
*   **Optimized Daily Schedules:** Employs Google OR-Tools to generate efficient routes considering travel times, visit durations, and time windows.
*   **Interactive Map Visualization:** Displays the final itinerary on an interactive map using Folium.
*   **User-Friendly Web Interface:** Built with Streamlit for easy interaction.

## Project Structure

```
PCSE25-53/
├── aggregation_search/
│   ├── .streamlit/
│   │   ├── config.toml         # Streamlit theme configuration (set to light)
│   │   └── secrets.toml        # For Google Maps API Key (MUST BE CREATED BY USER)
│   ├── embedding_gen.py        # Script to generate image embeddings and FAISS index
│   ├── final_app.py            # Main Streamlit application script
│   ├── requirements.txt        # Python dependencies
│   ├── aggregated_clip.index   # (Generated by embedding_gen.py - NOT IN REPO)
│   ├── place_mapping.json      # (Generated by embedding_gen.py - NOT IN REPO)
│   └── places_order.json       # (Generated by embedding_gen.py - NOT IN REPO)
├── documents/
│   ├── conference_documents/
│   │   ├── About_the_conference.pdf
│   │   ├── ICETISD-2025.pdf        # Research paper
│   │   ├── Presentation certificate Rovince Gangwar.pdf
│   │   └── Tourism_Itinerary_Generation.pptx
│   ├── certificate_project_report.pdf      # Certificate signed by project guide
│   ├── plag_report.pdf         # Plagiarism report for project report
│   ├── project_report.pdf      # Project report
│   └── synopsis.pdf            # Project synopsis
├── places_images/
│   ├── 50 most famous places in the world.zip/  # Directory containing images for ~50 locations,
│   │                                            # each in its own subdirectory.
│   │                                            # (This is a directory, not an actual .zip file to be extracted)
│   └── Pseudo marking/                        # Directory with CSVs (not used in this project)
└── .gitignore
```

## How It Works

1.  **Image Input:** The user uploads an image via the Streamlit interface.
2.  **Embedding Generation (User Image):** The uploaded image is processed by the CLIP model to generate a numerical embedding representing its visual features.
3.  **Similarity Search:** This embedding is compared against a pre-computed FAISS index (`aggregated_clip.index`) of embeddings for various tourist locations. The most visually similar locations are retrieved.
    *   The `aggregated_clip.index`, `place_mapping.json` (maps location name to a representative image), and `places_order.json` (maps FAISS index ID to location name) are generated once by `embedding_gen.py` using images from the `places_images/50 most famous places in the world.zip/` directory.
4.  **User Customization:** The user selects a primary location from the suggestions and provides preferences like travel dates, interests, and search radius.
5.  **Geospatial Analysis & POI Enrichment:** The Google Maps API is used to geocode the selected location, find nearby attractions based on user preferences, and fetch details like opening hours, ratings, and travel times.
6.  **Itinerary Optimization:** The collected data is fed into Google OR-Tools, which solves a Vehicle Routing Problem with Time Windows (VRPTW) to create an optimized day-by-day itinerary.
7.  **Output Presentation:** The final itinerary is displayed to the user, along with an interactive map (via Folium) showing routes and locations.

## Prerequisites

*   Python 3.12.9
*   `pip` for installing Python packages
*   Access to the internet (for downloading models and using Google Maps API)
*   A Google Maps API Key with the following APIs enabled:
    *   Maps JavaScript API
    *   Geocoding API
    *   Places API
    *   Directions API

## Setup and Installation

1.  **Clone the Repository:**
    ```bash
    git clone https://github.com/cse-kiet/PCSE25-53.git
    cd PCSE25-53
    ```

2.  **Set up Image Data:**
    Ensure the `places_images/` directory is present in the root of the project, structured as described above. Specifically, the images should be accessible under:
    `places_images/50 most famous places in the world.zip/<Place_Name_Directory>/<image_file.jpg>`
    (Note: `50 most famous places in the world.zip` is a directory name here, not a file to be unzipped by the user).

3.  **Navigate to the Application Directory:**
    ```bash
    cd aggregation_search
    ```

4.  **Create a Virtual Environment (Recommended):**
    ```bash
    python -m venv venv
    # On Windows
    venv\Scripts\activate
    # On macOS/Linux
    source venv/bin/activate
    ```

5.  **Install Dependencies:**
    ```bash
    pip install -r requirements.txt
    ```

6.  **Configure Google Maps API Key:**
    *   Create a file named `secrets.toml` inside the `.streamlit/` directory (i.e., `aggregation_search/.streamlit/secrets.toml`).
    *   Add your Google Maps API key to this file in the following format:
        ```toml
        GOOGLE_MAPS_API_KEY="YOUR_ACTUAL_GOOGLE_MAPS_API_KEY"
        ```
    *   **Important:** Replace `YOUR_ACTUAL_GOOGLE_MAPS_API_KEY` with your valid API key. This file is typically ignored by Git (and should be added to `.gitignore` if not already) to prevent exposing your key.

7.  **Configure Streamlit Theme (Optional):**
    The `aggregation_search/.streamlit/config.toml` file is already set up to use a light theme:
    ```toml
    [theme]
    base="light"
    ```

## Running the Project

There are two main steps to run the project:

### 1. Generate Embeddings and FAISS Index (One-time setup)

This step processes the images in `places_images/` to create the necessary data files for the similarity search. You only need to run this once, or whenever the images in `places_images/` change.

*   Make sure you are in the `aggregation_search/` directory.
*   Run the `embedding_gen.py` script:
    ```bash
    python embedding_gen.py
    ```
*   This script will create the following files in the `aggregation_search/` directory:
    *   `aggregated_clip.index` (FAISS index)
    *   `place_mapping.json` (mapping of place names to representative image paths)
    *   `places_order.json` (ordered list of place names corresponding to the FAISS index)

    **Note:** The `embedding_gen.py` script expects the `places_images` directory to be located one level above the `aggregation_search` directory (i.e., in the project root). The script uses `base_folder = os.path.join("..", "places_images")`.

### 2. Run the Streamlit Application

Once the embeddings and index are generated, you can run the main application.

*   Make sure you are in the `aggregation_search/` directory and your virtual environment is activated.
*   Run the `final_app.py` script using Streamlit:
    ```bash
    streamlit run final_app.py
    ```
*   This will start the Streamlit web server, and your default web browser should open to the application's URL (usually `http://localhost:8501`).

## Included Documents

## Included Documents

The repository contains several supporting documents, primarily located within the `PCSE25-53/documents/` directory:

*   **`documents/certificate_project_report.pdf`**: The certificate signed by project guide.
*   **`documents/project_report.pdf`**: The comprehensive final project report detailing the methodology, implementation, results, and conclusions of "Padharo Sa."
*   **`documents/synopsis.pdf`**: A concise synopsis of the project.
*   **`documents/plag_report.pdf`**: The plagiarism check report for the project report.
*   **`documents/conference_documents/`**: This subdirectory houses materials related to the project's presentation at the ICETISD-2025 conference:
    *   `documents/conference_documents/About_the_conference.pdf`: General information about the ICETISD-2025 conference.
    *   `documents/conference_documents/ICETISD-2025.pdf`: The research paper that was submitted and presented at the conference.
    *   `documents/conference_documents/Presentation certificate Rovince Gangwar.pdf`: The certificate received for the conference presentation.
    *   `documents/conference_documents/Tourism_Itinerary_Generation.pptx`: The PowerPoint presentation slides used during the conference.

## .gitignore

The `.gitignore` file is included to prevent common unnecessary files (like Python bytecode, virtual environments, and potentially sensitive files like `secrets.toml` if added explicitly) from being tracked by Git. It's good practice to ensure `aggregation_search/.streamlit/secrets.toml` is listed in your `.gitignore` to protect your API key.
